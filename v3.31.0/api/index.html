<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · SymbolicUtils.jl</title><meta name="title" content="API Reference · SymbolicUtils.jl"/><meta property="og:title" content="API Reference · SymbolicUtils.jl"/><meta property="twitter:title" content="API Reference · SymbolicUtils.jl"/><meta name="description" content="Documentation for SymbolicUtils.jl."/><meta property="og:description" content="Documentation for SymbolicUtils.jl."/><meta property="twitter:description" content="Documentation for SymbolicUtils.jl."/><meta property="og:url" content="https://docs.sciml.ai/SymbolicUtils/stable/api/"/><meta property="twitter:url" content="https://docs.sciml.ai/SymbolicUtils/stable/api/"/><link rel="canonical" href="https://docs.sciml.ai/SymbolicUtils/stable/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SymbolicUtils.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">SymbolicUtils.jl — Symbolic programming in Julia</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../manual/representation/">Term representation and simplification</a></li><li><a class="tocitem" href="../manual/rewrite/">Term Rewriting</a></li><li><a class="tocitem" href="../manual/interface/">Interfacing with SymbolicUtils.jl</a></li><li><a class="tocitem" href="../manual/codegen/">Code generation</a></li></ul></li><li class="is-active"><a class="tocitem" href>API Reference</a><ul class="internal"><li><a class="tocitem" href="#Symbols-and-Terms"><span>Symbols and Terms</span></a></li><li><a class="tocitem" href="#Rewriting-System"><span>Rewriting System</span></a></li><li><a class="tocitem" href="#Simplification-and-Transformation"><span>Simplification and Transformation</span></a></li><li><a class="tocitem" href="#Polynomial-Forms"><span>Polynomial Forms</span></a></li><li><a class="tocitem" href="#Code-Generation"><span>Code Generation</span></a></li><li><a class="tocitem" href="#Utilities"><span>Utilities</span></a></li></ul></li><li><a class="tocitem" href="../upgrade/">Upgrade to SymbolicUtils v1</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/master/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><h2 id="Symbols-and-Terms"><a class="docs-heading-anchor" href="#Symbols-and-Terms">Symbols and Terms</a><a id="Symbols-and-Terms-1"></a><a class="docs-heading-anchor-permalink" href="#Symbols-and-Terms" title="Permalink"></a></h2><h3 id="Creating-Symbols-and-Terms"><a class="docs-heading-anchor" href="#Creating-Symbols-and-Terms">Creating Symbols and Terms</a><a id="Creating-Symbols-and-Terms-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-Symbols-and-Terms" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.@syms" href="#SymbolicUtils.@syms"><code>SymbolicUtils.@syms</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@syms &lt;lhs_expr&gt;[::T1] &lt;lhs_expr&gt;[::T2]...</code></pre><p>For instance:</p><pre><code class="nohighlight hljs">@syms foo::Real bar baz(x, y::Real)::Complex</code></pre><p>Create one or more variables. <code>&lt;lhs_expr&gt;</code> can be just a symbol in which case it will be the name of the variable, or a function call in which case a function-like variable which has the same name as the function being called. The Sym type, or in the case of a function-like Sym, the output type of calling the function can be set using the <code>::T</code> syntax.</p><p><strong>Examples:</strong></p><ul><li><code>@syms foo bar::Real baz::Int</code> will create</li></ul><p>variable <code>foo</code> of symtype <code>Number</code> (the default), <code>bar</code> of symtype <code>Real</code> and <code>baz</code> of symtype <code>Int</code></p><ul><li><code>@syms f(x) g(y::Real, x)::Int h(a::Int, f(b))</code> creates 1-arg <code>f</code> 2-arg <code>g</code></li></ul><p>and 2 arg <code>h</code>. The second argument to <code>h</code> must be a one argument function-like variable. So, <code>h(1, g)</code> will fail and <code>h(1, f)</code> will work.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L1417-L1438">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.term" href="#SymbolicUtils.term"><code>SymbolicUtils.term</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">term(f, args...; type = nothing)</code></pre><p>Create a symbolic term with operation <code>f</code> and arguments <code>args</code>.</p><p><strong>Arguments</strong></p><ul><li><code>f</code>: The operation or function head of the term</li><li><code>args...</code>: The arguments to the operation</li><li><code>type</code>: Optional type specification for the term. If not provided, the type is inferred using <code>promote_symtype</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x y
(x, y)

julia&gt; term(+, x, y)
x + y

julia&gt; term(sin, x)
sin(x)

julia&gt; term(^, x, 2)
x^2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L829-L853">source</a></section></article><div class="admonition is-warning" id="Missing-docstring.-e54eb438e9f5d24e"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-e54eb438e9f5d24e" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Sym</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Inspecting-Terms"><a class="docs-heading-anchor" href="#Inspecting-Terms">Inspecting Terms</a><a id="Inspecting-Terms-1"></a><a class="docs-heading-anchor-permalink" href="#Inspecting-Terms" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.issym" href="#SymbolicUtils.issym"><code>SymbolicUtils.issym</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">issym(x)</code></pre><p>Returns <code>true</code> if <code>x</code> is a <code>Sym</code>. If true, <code>nameof</code> must be defined on <code>x</code> and must return a <code>Symbol</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L256-L261">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.symtype" href="#SymbolicUtils.symtype"><code>SymbolicUtils.symtype</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">symtype(x)
</code></pre><p>Returns the <a href="https://docs.julialang.org/en/v1/base/numbers/#Standard-Numeric-Types">numeric type</a>  of <code>x</code>. By default this is just <code>typeof(x)</code>. Define this for your symbolic types if you want <a href="#SymbolicUtils.simplify"><code>SymbolicUtils.simplify</code></a> to apply rules specific to numbers (such as commutativity of multiplication). Or such rules that may be implemented in the future.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L124">source</a></section></article><div class="admonition is-warning" id="Missing-docstring.-a72a5d5d885f9939"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-a72a5d5d885f9939" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.iscall</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-ca1e59e671597c67"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-ca1e59e671597c67" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.operation</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-8015cf8c5f42de62"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-8015cf8c5f42de62" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.arguments</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.sorted_arguments" href="#TermInterface.sorted_arguments"><code>TermInterface.sorted_arguments</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sorted_arguments(x::BasicSymbolic)</code></pre><p>Get the arguments of a symbolic expression in canonical sorted order.</p><p>For commutative operations like addition and multiplication, the arguments are sorted according to a canonical ordering. This ensures that equivalent expressions have the same representation.</p><p><strong>Arguments</strong></p><ul><li><code>x::BasicSymbolic</code>: The symbolic expression</li></ul><p><strong>Returns</strong></p><p>A vector of the arguments in sorted order. For non-commutative operations, returns the arguments in their original order.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x y z
(x, y, z)

julia&gt; expr = x + z + y
x + y + z

julia&gt; sorted_arguments(expr)
3-element Vector{Any}:
 x
 y
 z</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L152-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.showraw" href="#SymbolicUtils.showraw"><code>SymbolicUtils.showraw</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">showraw([io::IO], t)</code></pre><p>Display the raw structure of a symbolic expression without simplification.</p><p>This function shows the internal structure of symbolic expressions without applying any simplification rules, which is useful for debugging and understanding the exact form of an expression.</p><p><strong>Arguments</strong></p><ul><li><code>io::IO</code>: Optional IO stream to write to (defaults to stdout)</li><li><code>t</code>: The symbolic expression to display</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x
x

julia&gt; expr = x + x + x
3x

julia&gt; showraw(expr)  # Shows the unsimplified structure
x + x + x</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L1286-L1310">source</a></section></article><h3 id="Term-Types"><a class="docs-heading-anchor" href="#Term-Types">Term Types</a><a id="Term-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Term-Types" title="Permalink"></a></h3><div class="admonition is-warning" id="Missing-docstring.-389e1aa03a212afd"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-389e1aa03a212afd" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Term</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-ff61029ea8c7647b"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-ff61029ea8c7647b" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Add</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-8ba02bf89c69e2a0"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-8ba02bf89c69e2a0" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Mul</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-104f16634841bc48"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-104f16634841bc48" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Pow</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Metadata"><a class="docs-heading-anchor" href="#Metadata">Metadata</a><a id="Metadata-1"></a><a class="docs-heading-anchor-permalink" href="#Metadata" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.hasmetadata" href="#SymbolicUtils.hasmetadata"><code>SymbolicUtils.hasmetadata</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">hasmetadata(s::Symbolic, ctx)</code></pre><p>Check if a symbolic expression has metadata for a given context.</p><p><strong>Arguments</strong></p><ul><li><code>s::Symbolic</code>: The symbolic expression to check</li><li><code>ctx</code>: The metadata context key (typically a DataType)</li></ul><p><strong>Returns</strong></p><ul><li><code>true</code> if the expression has metadata for the given context, <code>false</code> otherwise</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x
x

julia&gt; hasmetadata(x, Float64)
false</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L952-L972">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.getmetadata" href="#SymbolicUtils.getmetadata"><code>SymbolicUtils.getmetadata</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getmetadata(s::Symbolic, ctx)</code></pre><p>Retrieve metadata associated with a symbolic expression for a given context.</p><p><strong>Arguments</strong></p><ul><li><code>s::Symbolic</code>: The symbolic expression</li><li><code>ctx</code>: The metadata context key (typically a DataType)</li></ul><p><strong>Returns</strong></p><p>The metadata value associated with the given context</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code> if the expression does not have metadata for the given context</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x::Float64
x

julia&gt; getmetadata(x, symtype)  # Get the type metadata
Float64</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L991-L1014">source</a></section><section><div><pre><code class="language-julia hljs">getmetadata(s::Symbolic, ctx, default)</code></pre><p>Retrieve metadata associated with a symbolic expression for a given context, returning a default value if not found.</p><p><strong>Arguments</strong></p><ul><li><code>s::Symbolic</code>: The symbolic expression</li><li><code>ctx</code>: The metadata context key (typically a DataType)</li><li><code>default</code>: The default value to return if metadata is not found</li></ul><p><strong>Returns</strong></p><p>The metadata value associated with the given context, or <code>default</code> if not found</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x
x

julia&gt; getmetadata(x, Float64, &quot;no type&quot;)
&quot;no type&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L1024-L1046">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.setmetadata" href="#SymbolicUtils.setmetadata"><code>SymbolicUtils.setmetadata</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setmetadata(s::Symbolic, ctx::DataType, val)</code></pre><p>Set metadata for a symbolic expression in a given context.</p><p><strong>Arguments</strong></p><ul><li><code>s::Symbolic</code>: The symbolic expression</li><li><code>ctx::DataType</code>: The metadata context key</li><li><code>val</code>: The metadata value to set</li></ul><p><strong>Returns</strong></p><p>A new symbolic expression with the updated metadata</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x
x

julia&gt; x_with_meta = setmetadata(x, Float64, &quot;custom value&quot;)
x

julia&gt; getmetadata(x_with_meta, Float64)
&quot;custom value&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L1075-L1099">source</a></section></article><h3 id="Type-Promotion"><a class="docs-heading-anchor" href="#Type-Promotion">Type Promotion</a><a id="Type-Promotion-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Promotion" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.promote_symtype" href="#SymbolicUtils.promote_symtype"><code>SymbolicUtils.promote_symtype</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">promote_symtype(f, Ts...)</code></pre><p>The result of applying <code>f</code> to arguments of <a href="#symtype"><code>symtype</code></a> <code>Ts...</code></p><pre><code class="language-julia hljs">julia&gt; promote_symtype(+, Real, Real)
Real

julia&gt; promote_symtype(+, Complex, Real)
Number

julia&gt; @syms f(x)::Complex
(f(::Number)::Complex,)

julia&gt; promote_symtype(f, Number)
Complex</code></pre><p>When constructing <a href="#Term"><code>Term</code></a>s without an explicit symtype, <code>promote_symtype</code> is used to figure out the symtype of the Term.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L1326-L1347">source</a></section><section><div><pre><code class="language-julia hljs">promote_symtype(f::FnType{X,Y}, arg_symtypes...)</code></pre><p>The output symtype of applying variable <code>f</code> to arguments of symtype <code>arg_symtypes...</code>. if the arguments are of the wrong type then this function will error.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/types.jl#L1364-L1369">source</a></section></article><h2 id="Rewriting-System"><a class="docs-heading-anchor" href="#Rewriting-System">Rewriting System</a><a id="Rewriting-System-1"></a><a class="docs-heading-anchor-permalink" href="#Rewriting-System" title="Permalink"></a></h2><h3 id="Rule-Creation"><a class="docs-heading-anchor" href="#Rule-Creation">Rule Creation</a><a id="Rule-Creation-1"></a><a class="docs-heading-anchor-permalink" href="#Rule-Creation" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.@rule" href="#SymbolicUtils.@rule"><code>SymbolicUtils.@rule</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@rule LHS =&gt; RHS</code></pre><p>Creates a <code>Rule</code> object. A rule object is callable, and  takes an expression and rewrites it if it matches the LHS pattern to the RHS pattern, returns <code>nothing</code> otherwise. The rule language is described below.</p><p>LHS can be any possibly nested function call expression where any of the arguments can optionally be a Slot (<code>~x</code>) or a Segment (<code>~~x</code>) (described below).</p><p>If an expression matches LHS entirely, then it is rewritten to the pattern in the RHS Segment (<code>~x</code>) and slot variables (<code>~~x</code>) on the RHS will substitute the result of the matches found for these variables in the LHS.</p><p><strong>Slot</strong>:</p><p>A Slot variable is written as <code>~x</code> and matches a single expression. <code>x</code> is the name of the variable. If a slot appears more than once in an LHS expression then expression matched at every such location must be equal (as shown by <code>isequal</code>).</p><p><em>Example:</em></p><p>Simple rule to turn any <code>sin</code> into <code>cos</code>:</p><pre><code class="language-julia hljs">julia&gt; @syms a b c
(a, b, c)

julia&gt; r = @rule sin(~x) =&gt; cos(~x)
sin(~x) =&gt; cos(~x)

julia&gt; r(sin(1+a))
cos((1 + a))</code></pre><p>A rule with 2 segment variables</p><pre><code class="language-julia hljs">julia&gt; r = @rule sin(~x + ~y) =&gt; sin(~x)*cos(~y) + cos(~x)*sin(~y)
sin(~x + ~y) =&gt; sin(~x) * cos(~y) + cos(~x) * sin(~y)

julia&gt; r(sin(a + b))
cos(a)*sin(b) + sin(a)*cos(b)</code></pre><p>A rule that matches two of the same expressions:</p><pre><code class="language-julia hljs">julia&gt; r = @rule sin(~x)^2 + cos(~x)^2 =&gt; 1
sin(~x) ^ 2 + cos(~x) ^ 2 =&gt; 1

julia&gt; r(sin(2a)^2 + cos(2a)^2)
1

julia&gt; r(sin(2a)^2 + cos(a)^2)
# nothing</code></pre><p><strong>Segment</strong>:</p><p>A Segment variable is written as <code>~~x</code> and matches zero or more expressions in the function call.</p><p><em>Example:</em></p><p>This implements the distributive property of multiplication: <code>+(~~ys)</code> matches expressions like <code>a + b</code>, <code>a+b+c</code> and so on. On the RHS <code>~~ys</code> presents as any old julia array.</p><pre><code class="language-julia hljs">julia&gt; r = @rule ~x * +((~~ys)) =&gt; sum(map(y-&gt; ~x * y, ~~ys));

julia&gt; r(2 * (a+b+c))
((2 * a) + (2 * b) + (2 * c))</code></pre><p><strong>Predicates</strong>:</p><p>There are two kinds of predicates, namely over slot variables and over the whole rule. For the former, predicates can be used on both <code>~x</code> and <code>~~x</code> by using the <code>~x::f</code> or <code>~~x::f</code>. Here <code>f</code> can be any julia function. In the case of a slot the function gets a single matched subexpression, in the case of segment, it gets an array of matched expressions.</p><p>The predicate should return <code>true</code> if the current match is acceptable, and <code>false</code> otherwise.</p><pre><code class="language-julia hljs">julia&gt; two_πs(x::Number) = abs(round(x/(2π)) - x/(2π)) &lt; 10^-9
two_πs (generic function with 1 method)

julia&gt; two_πs(x) = false
two_πs (generic function with 2 methods)

julia&gt; r = @rule sin(~~x + ~y::two_πs + ~~z) =&gt; sin(+(~~x..., ~~z...))
sin(~(~x) + ~(y::two_πs) + ~(~z)) =&gt; sin(+(~(~x)..., ~(~z)...))

julia&gt; r(sin(a+3π))

julia&gt; r(sin(a+6π))
sin(a)

julia&gt; r(sin(a+6π+c))
sin((a + c))</code></pre><p>Predicate function gets an array of values if attached to a segment variable (<code>~~x</code>).</p><p>For the predicate over the whole rule, use <code>@rule &lt;LHS&gt; =&gt; &lt;RHS&gt; where &lt;predicate&gt;</code>:</p><pre><code class="nohighlight hljs">julia&gt; @syms a b;

julia&gt; predicate(x) = x === a;

julia&gt; r = @rule ~x =&gt; ~x where predicate(~x);

julia&gt; r(a)
a

julia&gt; r(b) === nothing
true</code></pre><p>Note that this is syntactic sugar and that it is the same as something like <code>@rule ~x =&gt; f(~x) ? ~x : nothing</code>.</p><p><strong>Context</strong>:</p><p><em>In predicates</em>: Contextual predicates are functions wrapped in the <code>Contextual</code> type. The function is called with 2 arguments: the expression and a context object passed during a call to the Rule object (maybe done by passing a context to <code>simplify</code> or a <code>RuleSet</code> object).</p><p>The function can use the inputs however it wants, and must return a boolean indicating whether the predicate holds or not.</p><p><em>In the consequent pattern</em>: Use <code>(@ctx)</code> to access the context object on the right hand side of an expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rule.jl#L230-L365">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.@acrule" href="#SymbolicUtils.@acrule"><code>SymbolicUtils.@acrule</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@acrule(lhs =&gt; rhs)</code></pre><p>Create an associative-commutative rule that matches all permutations of the arguments.</p><p>This macro creates a rule that can match patterns regardless of the order of arguments in associative and commutative operations like addition and multiplication.</p><p><strong>Arguments</strong></p><ul><li><code>lhs</code>: The pattern to match (left-hand side)</li><li><code>rhs</code>: The replacement expression (right-hand side)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; @syms x y z
(x, y, z)

julia&gt; r = @acrule x + y =&gt; 2x  # Matches both x + y and y + x
ACRule(x + y =&gt; 2x)

julia&gt; r(x + y)
2x

julia&gt; r(y + x)
2x</code></pre><p>See also: <a href="#SymbolicUtils.@rule"><code>@rule</code></a>, <a href="@ref"><code>@ordered_acrule</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rule.jl#L439-L467">source</a></section></article><h3 id="Rewriters"><a class="docs-heading-anchor" href="#Rewriters">Rewriters</a><a id="Rewriters-1"></a><a class="docs-heading-anchor-permalink" href="#Rewriters" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters" href="#SymbolicUtils.Rewriters"><code>SymbolicUtils.Rewriters</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A rewriter is any function which takes an expression and returns an expression or <code>nothing</code>. If <code>nothing</code> is returned that means there was no changes applicable to the input expression.</p><p>The <code>Rewriters</code> module contains some types which create and transform rewriters.</p><ul><li><code>Empty()</code> is a rewriter which always returns <code>nothing</code></li><li><code>Chain(itr)</code> chain an iterator of rewriters into a single rewriter which applies  each chained rewriter in the given order.  If a rewriter returns <code>nothing</code> this is treated as a no-change.</li><li><code>RestartedChain(itr)</code> like <code>Chain(itr)</code> but restarts from the first rewriter once on the  first successful application of one of the chained rewriters.</li><li><code>IfElse(cond, rw1, rw2)</code> runs the <code>cond</code> function on the input, applies <code>rw1</code> if cond  returns true, <code>rw2</code> if it returns false</li><li><code>If(cond, rw)</code> is the same as <code>IfElse(cond, rw, Empty())</code></li><li><code>Prewalk(rw; threaded=false, thread_cutoff=100)</code> returns a rewriter which does a pre-order  traversal of a given expression and applies the rewriter <code>rw</code>. Note that if  <code>rw</code> returns <code>nothing</code> when a match is not found, then <code>Prewalk(rw)</code> will  also return nothing unless a match is found at every level of the walk.  <code>threaded=true</code> will use multi threading for traversal. <code>thread_cutoff</code> is  the minimum number of nodes in a subtree which should be walked in a  threaded spawn.</li><li><code>Postwalk(rw; threaded=false, thread_cutoff=100)</code> similarly does post-order traversal.</li><li><code>Fixpoint(rw)</code> returns a rewriter which applies <code>rw</code> repeatedly until there are no changes to be made.</li><li><code>FixpointNoCycle</code> behaves like <a href="#SymbolicUtils.Rewriters.Fixpoint"><code>Fixpoint</code></a> but instead it applies <code>rw</code> repeatedly only while it is returning new results.</li><li><code>PassThrough(rw)</code> returns a rewriter which if <code>rw(x)</code> returns <code>nothing</code> will instead  return <code>x</code> otherwise will return <code>rw(x)</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L1-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.Empty" href="#SymbolicUtils.Rewriters.Empty"><code>SymbolicUtils.Rewriters.Empty</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Empty()</code></pre><p>A rewriter that always returns <code>nothing</code>, indicating no rewrite occurred.</p><p>This is useful as a placeholder or for conditional rewriting patterns.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; Empty()(x)
nothing</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L43-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.IfElse" href="#SymbolicUtils.Rewriters.IfElse"><code>SymbolicUtils.Rewriters.IfElse</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">IfElse(cond, yes, no)</code></pre><p>A conditional rewriter that applies <code>yes</code> if <code>cond(x)</code> is true, otherwise applies <code>no</code>.</p><p><strong>Arguments</strong></p><ul><li><code>cond</code>: A function that returns true or false for the input</li><li><code>yes</code>: The rewriter to apply if the condition is true</li><li><code>no</code>: The rewriter to apply if the condition is false</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r = IfElse(x -&gt; x &gt; 0, x -&gt; -x, x -&gt; x)
julia&gt; r(5)  # Returns -5
julia&gt; r(-3) # Returns -3</code></pre><p>See also: <a href="#SymbolicUtils.Rewriters.If"><code>If</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L63-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.If" href="#SymbolicUtils.Rewriters.If"><code>SymbolicUtils.Rewriters.If</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">If(cond, yes)</code></pre><p>A conditional rewriter that applies <code>yes</code> if <code>cond(x)</code> is true, otherwise returns the input unchanged.</p><p>This is equivalent to <code>IfElse(cond, yes, Empty())</code>.</p><p><strong>Arguments</strong></p><ul><li><code>cond</code>: A function that returns true or false for the input</li><li><code>yes</code>: The rewriter to apply if the condition is true</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r = If(x -&gt; x &gt; 0, x -&gt; -x)
julia&gt; r(5)  # Returns -5
julia&gt; r(-3) # Returns -3 (unchanged)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L94-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.Chain" href="#SymbolicUtils.Rewriters.Chain"><code>SymbolicUtils.Rewriters.Chain</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Chain(rws; stop_on_match=false)</code></pre><p>Apply a sequence of rewriters to an expression, chaining the results.</p><p>Each rewriter in the chain receives the result of the previous rewriter. If a rewriter returns <code>nothing</code>, the input is passed unchanged to the next rewriter.</p><p><strong>Arguments</strong></p><ul><li><code>rws</code>: A collection of rewriters to apply in sequence</li><li><code>stop_on_match</code>: If true, stop at the first rewriter that produces a change</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r1 = @rule sin(~x)^2 + cos(~x)^2 =&gt; 1
julia&gt; r2 = @rule sin(2*(~x)) =&gt; 2*sin(~x)*cos(~x)
julia&gt; chain = Chain([r1, r2])
julia&gt; chain(sin(x)^2 + cos(x)^2)  # Returns 1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L114-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.RestartedChain" href="#SymbolicUtils.Rewriters.RestartedChain"><code>SymbolicUtils.Rewriters.RestartedChain</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RestartedChain(rws)</code></pre><p>Apply rewriters in sequence, restarting the chain when any rewriter produces a change.</p><p>When any rewriter in the chain produces a non-nothing result, the entire chain is restarted with that result as the new input.</p><p><strong>Arguments</strong></p><ul><li><code>rws</code>: A collection of rewriters to apply</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r1 = @rule ~x + ~x =&gt; 2 * ~x
julia&gt; r2 = @rule 2 * ~x =&gt; ~x * 2
julia&gt; chain = RestartedChain([r1, r2])
julia&gt; chain(x + x)  # Applies r1, then restarts and applies r2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L156-L174">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.Fixpoint" href="#SymbolicUtils.Rewriters.Fixpoint"><code>SymbolicUtils.Rewriters.Fixpoint</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Fixpoint(rw)</code></pre><p>Apply a rewriter repeatedly until a fixed point is reached.</p><p>The rewriter is applied repeatedly until the output equals the input (either by identity or by <code>isequal</code>), indicating a fixed point has been reached.</p><p><strong>Arguments</strong></p><ul><li><code>rw</code>: The rewriter to apply repeatedly</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r = @rule ~x + ~x =&gt; 2 * ~x
julia&gt; fp = Fixpoint(r)
julia&gt; fp(x + x + x + x)  # Keeps applying until no more changes</code></pre><p>See also: <a href="#SymbolicUtils.Rewriters.FixpointNoCycle"><code>FixpointNoCycle</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L206-L225">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.FixpointNoCycle" href="#SymbolicUtils.Rewriters.FixpointNoCycle"><code>SymbolicUtils.Rewriters.FixpointNoCycle</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FixpointNoCycle(rw)</code></pre><p><code>FixpointNoCycle</code> behaves like <a href="#SymbolicUtils.Rewriters.Fixpoint"><code>Fixpoint</code></a>, but returns a rewriter which applies <code>rw</code> repeatedly until  it produces a result that was already produced before, for example,  if the repeated application of <code>rw</code> produces results <code>a, b, c, d, b</code> in order,  <code>FixpointNoCycle</code> stops because <code>b</code> has been already produced. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L243-L251">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.Postwalk" href="#SymbolicUtils.Rewriters.Postwalk"><code>SymbolicUtils.Rewriters.Postwalk</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Postwalk(rw; threaded=false, thread_cutoff=100, maketerm=maketerm)</code></pre><p>Apply a rewriter to a symbolic expression tree in post-order (bottom-up).</p><p>Post-order traversal visits child nodes before their parents, allowing for simplification of subexpressions before the containing expression.</p><p><strong>Arguments</strong></p><ul><li><code>rw</code>: The rewriter to apply at each node</li><li><code>threaded</code>: If true, use multi-threading for large expressions</li><li><code>thread_cutoff</code>: Minimum node count to trigger threading</li><li><code>maketerm</code>: Function to construct terms (defaults to <code>maketerm</code>)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r = @rule ~x + ~x =&gt; 2 * ~x
julia&gt; pw = Postwalk(r)
julia&gt; pw((x + x) * (y + y))  # Simplifies both additions
2x * 2y</code></pre><p>See also: <a href="#SymbolicUtils.Rewriters.Prewalk"><code>Prewalk</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L292-L315">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.Prewalk" href="#SymbolicUtils.Rewriters.Prewalk"><code>SymbolicUtils.Rewriters.Prewalk</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Prewalk(rw; threaded=false, thread_cutoff=100, maketerm=maketerm)</code></pre><p>Apply a rewriter to a symbolic expression tree in pre-order (top-down).</p><p>Pre-order traversal visits parent nodes before their children, allowing for transformation of the overall structure before processing subexpressions.</p><p><strong>Arguments</strong></p><ul><li><code>rw</code>: The rewriter to apply at each node</li><li><code>threaded</code>: If true, use multi-threading for large expressions</li><li><code>thread_cutoff</code>: Minimum node count to trigger threading</li><li><code>maketerm</code>: Function to construct terms (defaults to <code>maketerm</code>)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r = @rule sin(~x) =&gt; cos(~x)
julia&gt; pw = Prewalk(r)
julia&gt; pw(sin(sin(x)))  # Transforms outer sin first
cos(cos(x))</code></pre><p>See also: <a href="#SymbolicUtils.Rewriters.Postwalk"><code>Postwalk</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L320-L343">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.Rewriters.PassThrough" href="#SymbolicUtils.Rewriters.PassThrough"><code>SymbolicUtils.Rewriters.PassThrough</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PassThrough(rw)</code></pre><p>A rewriter that returns the input unchanged if the wrapped rewriter returns <code>nothing</code>.</p><p>This is useful for making rewriters that preserve the input when no rule applies.</p><p><strong>Arguments</strong></p><ul><li><code>rw</code>: The rewriter to wrap</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; r = @rule sin(~x) =&gt; cos(~x)
julia&gt; pt = PassThrough(r)
julia&gt; pt(sin(x))  # Returns cos(x)
julia&gt; pt(tan(x))  # Returns tan(x) unchanged</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rewriters.jl#L348-L365">source</a></section></article><h2 id="Simplification-and-Transformation"><a class="docs-heading-anchor" href="#Simplification-and-Transformation">Simplification and Transformation</a><a id="Simplification-and-Transformation-1"></a><a class="docs-heading-anchor-permalink" href="#Simplification-and-Transformation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.simplify" href="#SymbolicUtils.simplify"><code>SymbolicUtils.simplify</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">simplify(x; expand=false,
            threaded=false,
            thread_subtree_cutoff=100,
            rewriter=nothing)</code></pre><p>Simplify an expression (<code>x</code>) by applying <code>rewriter</code> until there are no changes. <code>expand=true</code> applies <a href="/api/#expand"><code>expand</code></a> in the beginning of each fixpoint iteration.</p><p>By default, simplify will assume denominators are not zero and allow cancellation in fractions. Pass <code>simplify_fractions=false</code> to prevent this.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/simplify.jl#L2-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.expand" href="#SymbolicUtils.expand"><code>SymbolicUtils.expand</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">expand(expr)</code></pre><p>Expand expressions by distributing multiplication over addition, e.g., <code>a*(b+c)</code> becomes <code>ab+ac</code>.</p><p><code>expand</code> uses replace symbols and non-algebraic expressions by variables of type <code>variable_type</code> to compute the distribution using a specialized sparse multivariate polynomials implementation. <code>variable_type</code> can be any subtype of <code>MultivariatePolynomials.AbstractVariable</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/polyform.jl#L237-L247">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.substitute" href="#SymbolicUtils.substitute"><code>SymbolicUtils.substitute</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">substitute(expr, dict; fold=true)</code></pre><p>substitute any subexpression that matches a key in <code>dict</code> with the corresponding value. If <code>fold=false</code>, expressions which can be evaluated won&#39;t be evaluated.</p><pre><code class="language-julia hljs">julia&gt; substitute(1+sqrt(y), Dict(y =&gt; 2), fold=true)
2.414213562373095
julia&gt; substitute(1+sqrt(y), Dict(y =&gt; 2), fold=false)
1 + sqrt(2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/substitute.jl#L2-L15">source</a></section></article><h2 id="Polynomial-Forms"><a class="docs-heading-anchor" href="#Polynomial-Forms">Polynomial Forms</a><a id="Polynomial-Forms-1"></a><a class="docs-heading-anchor-permalink" href="#Polynomial-Forms" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.PolyForm" href="#SymbolicUtils.PolyForm"><code>SymbolicUtils.PolyForm</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PolyForm{T} &lt;: Symbolic</code></pre><p>Abstracts a <a href="https://juliaalgebra.github.io/MultivariatePolynomials.jl/stable/">MultivariatePolynomials.jl</a> as a SymbolicUtils expression and vice-versa.</p><p>The SymbolicUtils term interface (<code>isexpr</code>/<code>iscall</code>, <code>operation, and</code>arguments<code>) works on PolyForm lazily: the</code>operation<code>and</code>arguments<code>are created by converting one level of arguments into SymbolicUtils expressions. They may further contain PolyForm within them. We use this to hold polynomials in memory while doing</code>simplify_fractions`.</p><pre><code class="nohighlight hljs">PolyForm{T}(x; Fs=Union{typeof(*),typeof(+),typeof(^)}, recurse=false)</code></pre><p>Turn a Symbolic expression <code>x</code> into a polynomial and return a PolyForm that abstracts it.</p><p><code>Fs</code> are the types of functions which should be applied if arguments are themselves polynomialized. For example, if you only want to polynomialize the base of power expressions, you would  leave out <code>typeof(^)</code> from the union. In this case <code>^</code> is not called, but maintained as a <code>Pow</code> term.</p><p><code>recurse</code> is a flag which calls <code>PolyForm</code> recursively on subexpressions. For example:</p><pre><code class="language-julia hljs">PolyForm(sin((x+y)^2))               #=&gt; sin((x+y)^2)
PolyForm(sin((x+y)^2), recurse=true) #=&gt; sin((x^2 + (2x)y + y^2))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/polyform.jl#L4-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.simplify_fractions" href="#SymbolicUtils.simplify_fractions"><code>SymbolicUtils.simplify_fractions</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">simplify_fractions(x; polyform=false)</code></pre><p>Find <code>Div</code> nodes and simplify them by cancelling a set of factors of numerators and denominators. If <code>polyform=true</code> the factors which were converted into PolyForm for the purpose of finding polynomial GCDs will be left as they are. Note that since PolyForms have different <code>hash</code>es than SymbolicUtils expressions, <code>substitute</code> may not work if <code>polyform=true</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/polyform.jl#L321-L329">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.quick_cancel" href="#SymbolicUtils.quick_cancel"><code>SymbolicUtils.quick_cancel</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">quick_cancel(d)</code></pre><p>Cancel out matching factors from numerator and denominator. This is not as effective as <code>simplify_fractions</code>, for example, it wouldn&#39;t simplify <code>(x^2 + 15 -  8x)  / (x - 5)</code> to <code>(x - 3)</code>. But it will simplify <code>(x - 5)^2*(x - 3) / (x - 5)</code> to <code>(x - 5)*(x - 3)</code>. Has optimized processes for <code>Mul</code> and <code>Pow</code> terms.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/polyform.jl#L406-L414">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.flatten_fractions" href="#SymbolicUtils.flatten_fractions"><code>SymbolicUtils.flatten_fractions</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flatten_fractions(x)</code></pre><p>Flatten nested fractions that are added together.</p><pre><code class="language-julia hljs">julia&gt; flatten_fractions((1+(1+1/a)/a)/a)
(1 + a + a^2) / (a^3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/polyform.jl#L356-L365">source</a></section></article><h2 id="Code-Generation"><a class="docs-heading-anchor" href="#Code-Generation">Code Generation</a><a id="Code-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Code-Generation" title="Permalink"></a></h2><h3 id="Core-Functions"><a class="docs-heading-anchor" href="#Core-Functions">Core Functions</a><a id="Core-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Functions" title="Permalink"></a></h3><div class="admonition is-warning" id="Missing-docstring.-709aad7ef635d2ec"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-709aad7ef635d2ec" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.toexpr</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-a01768280800e6a7"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-a01768280800e6a7" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.cse</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Code-Generation-Types"><a class="docs-heading-anchor" href="#Code-Generation-Types">Code Generation Types</a><a id="Code-Generation-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Code-Generation-Types" title="Permalink"></a></h3><div class="admonition is-warning" id="Missing-docstring.-88de1715dcdd61ad"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-88de1715dcdd61ad" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Assignment</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-a14fc530c0b59db1"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-a14fc530c0b59db1" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Let</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-a3bcf7f4691fa34a"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-a3bcf7f4691fa34a" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Func</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-56ac6c93c7d4c33a"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-56ac6c93c7d4c33a" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.DestructuredArgs</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-f74f5567870b984f"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-f74f5567870b984f" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.LiteralExpr</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-4a9ae5b4d0d7f036"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-4a9ae5b4d0d7f036" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.ForLoop</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Array-Operations"><a class="docs-heading-anchor" href="#Array-Operations">Array Operations</a><a id="Array-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#Array-Operations" title="Permalink"></a></h3><div class="admonition is-warning" id="Missing-docstring.-eec05f61faf18f48"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-eec05f61faf18f48" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.SetArray</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-f85147bfecdde6d4"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-f85147bfecdde6d4" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.MakeArray</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-ae63182a0f4a5ee4"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-ae63182a0f4a5ee4" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.MakeSparseArray</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-e8d74e36ab91c289"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-e8d74e36ab91c289" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.MakeTuple</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Parallelism"><a class="docs-heading-anchor" href="#Parallelism">Parallelism</a><a id="Parallelism-1"></a><a class="docs-heading-anchor-permalink" href="#Parallelism" title="Permalink"></a></h3><div class="admonition is-warning" id="Missing-docstring.-6e692711f3345bf1"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-6e692711f3345bf1" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.SpawnFetch</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-b6506aa73697e1a0"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-b6506aa73697e1a0" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SymbolicUtils.Multithreaded</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Utilities"><a class="docs-heading-anchor" href="#Utilities">Utilities</a><a id="Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SymbolicUtils.@timerewrite" href="#SymbolicUtils.@timerewrite"><code>SymbolicUtils.@timerewrite</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@timerewrite expr</code></pre><p>If <code>expr</code> calls <code>simplify</code> or a <code>RuleSet</code> object, track the amount of time it spent on applying each rule and pretty print the timing.</p><p>This uses <a href="https://github.com/KristofferC/TimerOutputs.jl">TimerOutputs.jl</a>.</p><p><strong>Example:</strong></p><pre><code class="language-julia hljs">
julia&gt; expr = foldr(*, rand([a,b,c,d], 100))
(a ^ 26) * (b ^ 30) * (c ^ 16) * (d ^ 28)

julia&gt; @timerewrite simplify(expr)
 ────────────────────────────────────────────────────────────────────────────────────────────────
                                                         Time                   Allocations
                                                 ──────────────────────   ───────────────────────
                Tot / % measured:                     340ms / 15.3%           92.2MiB / 10.8%

 Section                                 ncalls     time   %tot     avg     alloc   %tot      avg
 ────────────────────────────────────────────────────────────────────────────────────────────────
 ACRule((~y) ^ ~n * ~y =&gt; (~y) ^ (~n ...    667   11.1ms  21.3%  16.7μs   2.66MiB  26.8%  4.08KiB
   RHS                                       92    277μs  0.53%  3.01μs   14.4KiB  0.14%     160B
 ACRule((~x) ^ ~n * (~x) ^ ~m =&gt; (~x)...    575   7.63ms  14.6%  13.3μs   1.83MiB  18.4%  3.26KiB
 (*)(~(~(x::!issortedₑ))) =&gt; sort_arg...    831   6.31ms  12.1%  7.59μs    738KiB  7.26%     910B
   RHS                                      164   3.03ms  5.81%  18.5μs    250KiB  2.46%  1.52KiB
   ...
   ...
 ────────────────────────────────────────────────────────────────────────────────────────────────
(a ^ 26) * (b ^ 30) * (c ^ 16) * (d ^ 28)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/SymbolicUtils.jl/blob/65daf4b29ff3d2cd451f9704f1e2a0882a080df5/src/rule.jl#L540-L573">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../manual/codegen/">« Code generation</a><a class="docs-footer-nextpage" href="../upgrade/">Upgrade to SymbolicUtils v1 »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 13 August 2025 11:26">Wednesday 13 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
